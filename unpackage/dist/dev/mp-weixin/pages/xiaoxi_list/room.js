(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/xiaoxi_list/room"],{36:
/*!**********************************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/main.js?{"page":"pages%2Fxiaoxi_list%2Froom"} ***!
  \**********************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";(function(t){e(/*! uni-pages */4);o(e(/*! vue */2));var i=o(e(/*! ./pages/xiaoxi_list/room.vue */37));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},37:
/*!***************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue ***!
  \***************************************************************/
/*! no static exports found */function(t,i,e){"use strict";e.r(i);var o=e(/*! ./room.vue?vue&type=template&id=d8e9f394&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NzQ2NiwiYXR0cnMiOnsibW9kdWxlIjoiZmlsdGVyIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3V0aWxzL2ZpbHRlci53eHMifSwiZW5kIjo3NDY2fX0%3D& */38),n=e(/*! ./room.vue?vue&type=script&lang=js& */40);for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e(/*! ./room.vue?vue&type=style&index=0&lang=scss& */43);var g,a=e(/*! ../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */14),r=e(/*! ../../utils/filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C68_yibeitong%5Cpages%5Cxiaoxi_list%5Croom.vue&module=filter&lang=wxs */45),c=Object(a["default"])(n["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],g);"function"===typeof r["default"]&&Object(r["default"])(c),c.options.__file="pages/xiaoxi_list/room.vue",i["default"]=c.exports},38:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=template&id=d8e9f394&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NzQ2NiwiYXR0cnMiOnsibW9kdWxlIjoiZmlsdGVyIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3V0aWxzL2ZpbHRlci53eHMifSwiZW5kIjo3NDY2fX0%3D& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,i,e){"use strict";e.r(i);var o=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=template&id=d8e9f394&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NzQ2NiwiYXR0cnMiOnsibW9kdWxlIjoiZmlsdGVyIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3V0aWxzL2ZpbHRlci53eHMifSwiZW5kIjo3NDY2fX0%3D& */39);e.d(i,"render",(function(){return o["render"]})),e.d(i,"staticRenderFns",(function(){return o["staticRenderFns"]})),e.d(i,"recyclableRender",(function(){return o["recyclableRender"]})),e.d(i,"components",(function(){return o["components"]}))},39:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=template&id=d8e9f394&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NzQ2NiwiYXR0cnMiOnsibW9kdWxlIjoiZmlsdGVyIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3V0aWxzL2ZpbHRlci53eHMifSwiZW5kIjo3NDY2fX0%3D& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,i,e){"use strict";var o;e.r(i),e.d(i,"render",(function(){return n})),e.d(i,"staticRenderFns",(function(){return g})),e.d(i,"recyclableRender",(function(){return s})),e.d(i,"components",(function(){return o}));var n=function(){var t=this,i=t.$createElement,e=(t._self._c,t.__map(t.msgList,(function(i,e){var o=t.__get_orig(i),n=0==e?t.timeFliter(i.time):null,s=0!=e&&e>0?t.gettime1(e-1):null,g="out"==i.flow||i.avatar?null:t.getimg("/static/images/tx_m2.jpg"),a=i.type==t.TIM.TYPES.MSG_TEXT?t.nodesFliter(i.payload.text):null,r=i.type==t.TIM.TYPES.MSG_CUSTOM&&"custom1"==i.payload.data?t.getarg(i.payload.extension,"a",i.payload.data):null,c=i.type==t.TIM.TYPES.MSG_CUSTOM&&"custom1"==i.payload.data?t.getarg(i.payload.extension,"a1",i.payload.data):null,f=i.type==t.TIM.TYPES.MSG_CUSTOM&&"custom1"==i.payload.data?t.getarg(i.payload.extension,"a2",i.payload.data):null,l=i.type==t.TIM.TYPES.MSG_CUSTOM&&"custom1"==i.payload.data?t.getarg(i.payload.extension,"a3",i.payload.data):null,u=i.type==t.TIM.TYPES.MSG_CUSTOM&&"custom_good"==i.payload.data?t.getarg(i.payload.extension,"a2",i.payload.data):null,d=i.type==t.TIM.TYPES.MSG_CUSTOM&&"custom_good"==i.payload.data?t.getarg(i.payload.extension,"a3",i.payload.data):null,h=i.type==t.TIM.TYPES.MSG_CUSTOM&&"custom_good"==i.payload.data?t.getarg(i.payload.extension,"a",i.payload.data):null;return{$orig:o,m0:n,m1:s,m2:g,m3:a,m4:r,m5:c,m6:f,m7:l,m8:u,m9:d,m10:h}})));t._isMounted||(t.e0=function(i){t.isFocus=!0},t.e1=function(i){t.isFocus=!1}),t.$mp.data=Object.assign({},{$root:{l0:e}})},s=!1,g=[];n._withStripped=!0},40:
/*!****************************************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";e.r(i);var o=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=script&lang=js& */41),n=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=n.a},41:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,n=g(e(/*! ../../service.js */8)),s=e(/*! vuex */10);g(e(/*! ../../common/tim/user.js */42));function g(t){return t&&t.__esModule?t:{default:t}}function a(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,o)}return e}function r(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?a(Object(e),!0).forEach((function(i){c(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function c(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var f={data:function(){return{msg_type:1,goods_id:"",goods_name:"",goods_img:"",goods_pri:"",conversationActive:null,toUserId:"",toUserInfo:null,userInfo:null,nextReqMessageID:"",count:15,isCompleted:"",msgList:[{time:"1611316603",flow:"out",type:"TIMTextElem",payload:{text:"你好"}},{time:"1611316613",flow:"",type:"TIMTextElem",payload:{text:"你好"}}],TIM:null,textMsg:"",isHistoryLoading:!1,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgImgList:[],myuid:0,RECORDER:t.getRecorderManager(),isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,AUDIO:t.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,emojiList:this.$common.emojiList,onlineEmoji:{"100.gif":"AbNQgA.gif","101.gif":"AbN3ut.gif","102.gif":"AbNM3d.gif","103.gif":"AbN8DP.gif","104.gif":"AbNljI.gif","105.gif":"AbNtUS.gif","106.gif":"AbNGHf.gif","107.gif":"AbNYE8.gif","108.gif":"AbNaCQ.gif","109.gif":"AbNN4g.gif","110.gif":"AbN0vn.gif","111.gif":"AbNd3j.gif","112.gif":"AbNsbV.gif","113.gif":"AbNwgs.gif","114.gif":"AbNrD0.gif","115.gif":"AbNDuq.gif","116.gif":"AbNg5F.gif","117.gif":"AbN6ET.gif","118.gif":"AbNcUU.gif","119.gif":"AbNRC4.gif","120.gif":"AbNhvR.gif","121.gif":"AbNf29.gif","122.gif":"AbNW8J.gif","123.gif":"AbNob6.gif","124.gif":"AbN5K1.gif","125.gif":"AbNHUO.gif","126.gif":"AbNIDx.gif","127.gif":"AbN7VK.gif","128.gif":"AbNb5D.gif","129.gif":"AbNX2d.gif","130.gif":"AbNLPe.gif","131.gif":"AbNjxA.gif","132.gif":"AbNO8H.gif","133.gif":"AbNxKI.gif","134.gif":"AbNzrt.gif","135.gif":"AbU9Vf.gif","136.gif":"AbUSqP.gif","137.gif":"AbUCa8.gif","138.gif":"AbUkGQ.gif","139.gif":"AbUFPg.gif","140.gif":"AbUPIS.gif","141.gif":"AbUZMn.gif","142.gif":"AbUExs.gif","143.gif":"AbUA2j.gif","144.gif":"AbUMIU.gif","145.gif":"AbUerq.gif","146.gif":"AbUKaT.gif","147.gif":"AbUmq0.gif","148.gif":"AbUuZV.gif","149.gif":"AbUliF.gif","150.gif":"AbU1G4.gif","151.gif":"AbU8z9.gif","152.gif":"AbU3RJ.gif","153.gif":"AbUYs1.gif","154.gif":"AbUJMR.gif","155.gif":"AbUadK.gif","156.gif":"AbUtqx.gif","157.gif":"AbUUZ6.gif","158.gif":"AbUBJe.gif","159.gif":"AbUdIO.gif","160.gif":"AbU0iD.gif","161.gif":"AbUrzd.gif","162.gif":"AbUDRH.gif","163.gif":"AbUyQA.gif","164.gif":"AbUWo8.gif","165.gif":"AbU6sI.gif","166.gif":"AbU2eP.gif","167.gif":"AbUcLt.gif","168.gif":"AbU4Jg.gif","169.gif":"AbURdf.gif","170.gif":"AbUhFS.gif","171.gif":"AbU5WQ.gif","172.gif":"AbULwV.gif","173.gif":"AbUIzj.gif","174.gif":"AbUTQs.gif","175.gif":"AbU7yn.gif","176.gif":"AbUqe0.gif","177.gif":"AbUHLq.gif","178.gif":"AbUOoT.gif","179.gif":"AbUvYF.gif","180.gif":"AbUjFU.gif","181.gif":"AbaSSJ.gif","182.gif":"AbUxW4.gif","183.gif":"AbaCO1.gif","184.gif":"Abapl9.gif","185.gif":"Aba9yR.gif","186.gif":"AbaFw6.gif","187.gif":"Abaiex.gif","188.gif":"AbakTK.gif","189.gif":"AbaZfe.png","190.gif":"AbaEFO.gif","191.gif":"AbaVYD.gif","192.gif":"AbamSH.gif","193.gif":"AbaKOI.gif","194.gif":"Abanld.gif","195.gif":"Abau6A.gif","196.gif":"AbaQmt.gif","197.gif":"Abal0P.gif","198.gif":"AbatpQ.gif","199.gif":"Aba1Tf.gif","200.png":"Aba8k8.png","201.png":"AbaGtS.png","202.png":"AbaJfg.png","203.png":"AbaNlj.png","204.png":"Abawmq.png","205.png":"AbaU6s.png","206.png":"AbaaXn.png","207.png":"Aba000.png","208.png":"AbarkT.png","209.png":"AbastU.png","210.png":"AbaB7V.png","211.png":"Abafn1.png","212.png":"Abacp4.png","213.png":"AbayhF.png","214.png":"Abag1J.png","215.png":"Aba2c9.png","216.png":"AbaRXR.png","217.png":"Aba476.png","218.png":"Abah0x.png","219.png":"Abdg58.png"},windowsState:"",redenvelopeData:{rid:null,from:null,face:null,blessing:null,money:null},customModalVisible:!1,customData:"",customDescription:"",customExtension:"",focusedInput:"",isShow:!1}},computed:r({},(0,s.mapState)({loginDatas:"loginDatas",hasLogin:"hasLogin",currentMessageList:function(t){return t.currentMessageList}})),watch:{currentMessageList:function(t,i){this.msgList=t,this.screenMsg(t,i)}},onLoad:function(i){var e=this;o=this,console.log("对方聊天id"+i.id),console.log("对方聊天type"+i.type),t.setNavigationBarTitle({title:"物美团购群1"}),this.hasLogin?(console.log(i.goods_name),console.log(i.goods_img),console.log(i.goods_pri),this.goods_name=i.goods_name,this.goods_img=i.goods_img,this.goods_pri=i.goods_pri,this.goods_id=i.goods_id,i.type&&(this.msg_type=i.type),this.toUserId=i.id?i.id:this.$store.state.toUserId,console.log("toUserId===============>"+this.toUserId),this.conversationActive=this.$store.state.conversationActive,this.TIM=this.$TIM,this.getMsgList(),this.AUDIO.onEnded((function(t){e.playMsgid=null})),this.RECORDER.onStart((function(t){e.recordBegin(t)})),this.RECORDER.onStop((function(t){e.recordEnd(t)}))):t.navigateBack({delta:1})},onShow:function(){var t=this;t.isShow=!0,setTimeout((function(){t.scrollToBottom(),t.scrollTop=99999999999999,t.isHistoryLoading=!1}),500)},onUnload:function(){var t=this.tim.setMessageRead({conversationID:this.conversationActive.conversationID});t.then((function(t){console.log("全部已读")})).catch((function(t){console.warn("setMessageRead error:",t)}))},onPullDownRefresh:function(){t.stopPullDownRefresh()},methods:{getimg:function(t){return n.default.getimg(t)},getmsg:function(){var i=this,e={token:i.loginDatas.userToken,type:i.msg_type,id:i.toUserId};n.default.P_get("/getTx",e).then((function(e){console.log(e),1==e.code&&(i.toUserInfo=e.data,t.setNavigationBarTitle({title:e.data.name}))})).catch((function(i){console.log(i),t.showToast({icon:"none",title:"获取对方数据失败"})}))},gettime1:function(t){if(!(t<0)){console.log(t,t+1);var i=this.msgList[t].time,e=this.msgList[t+1].time;return console.log(this.getchattime(i),this.getchattime(e)),this.getchattime(i)!=this.getchattime(e)?this.getchattime(e):void 0}},jump:function(t){var i=this;1!=i.btn_kg&&(i.btn_kg=1,setTimeout((function(){i.btn_kg=0}),1e3),n.default.jump(t))},scrollToBottom:function(){this.isShow&&wx.pageScrollTo({scrollTop:9999999})},getarg:function(t,i,e){if("custom"!=e&&t){var o=/\\$/gi;t=t.replace(o,"");var n=JSON.parse(t);return n.hasOwnProperty(i)?n[i]:void 0}},nodesFliter:function(t){var i='<div class="ltbox_div" style="word-wrap:break-word;line-height:40upx;">'+t+"</div>";return i},timeFliter:function(t){var i=new Date(1e3*t),e=this.$common.dateTimeFliter(i);return e},getchattime:function(t){if(t){var i=(new Date).getFullYear(),e=(new Date).getMonth()+1,o=(new Date).getDate();t=Number(1e3*t);var n=new Date(t),s=n.getFullYear(),g=n.getMonth()+1,a=n.getDate(),r=n.getHours(),c=n.getMinutes();return c<10&&(c="0"+c),console.log(n),s==i?g==e&&a==o?r+":"+c:g+"-"+a+" "+r+":"+c:s+"-"+g+"-"+a+" "+r+":"+c}},screenMsg:function(t,i){var e=this;if(t[0]&&i[0])if(t[0].ID!=i[0].ID&&t.length>=this.count){var o=t.length-i.length-1;this.$nextTick((function(){e.scrollToView=t[o].ID}))}else this.$nextTick((function(){e.scrollToView=t[t.length-1].ID}));else console.log("*****"),this.$nextTick((function(){e.scrollToView=t[t.length-1].ID,e.scrollTop=9999999}))},loadHistory:function(t){var i=this;this.isHistoryLoading=!0;var e=this.conversationActive.conversationID,o=this.tim.getMessageList({conversationID:e,nextReqMessageID:this.nextReqMessageID,count:this.count});o.then((function(t){i.$store.commit("unshiftCurrentMessageList",t.data.messageList),i.nextReqMessageID=t.data.nextReqMessageID,i.isCompleted=t.data.isCompleted,i.isHistoryLoading=!1}))},getMsgList:function(){var t=this,i=this.conversationActive.conversationID,e=this.tim.getMessageList({conversationID:i,count:this.count});console.log(i),console.log(this.count),console.log(e),e.then((function(i){console.log(i.data),i.data.nextReqMessageID&&(t.$store.commit("pushCurrentMessageList",i.data.messageList),t.nextReqMessageID=i.data.nextReqMessageID,t.isCompleted=i.data.isCompleted,t.scrollToView=i.data.messageList[i.data.messageList.length-1].ID,setTimeout((function(){this.scrollTop=9999,this.$nextTick((function(){this.scrollAnimation=!0}))}),10))}))},setPicSize:function(i){var e=t.upx2px(350),o=t.upx2px(350);if(i.w>e||i.h>o){var n=i.w/i.h;i.w=n>1?e:o*n,i.h=n>1?e/n:o}return i},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout((function(){t.hideMore=!0,t.hideEmoji=!0}),150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},handRedEnvelopes:function(){t.navigateTo({url:"HM-hand/HM-hand"}),this.hideDrawer()},getImage:function(i){var e=this;e.hideDrawer(),t.chooseImage({sourceType:[i],sizeType:["original","compressed"],count:1,success:function(t){e.sendMsg(t,"img")}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer()},addEmoji:function(t){this.textMsg+=t.alt},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},sendText:function(){if(this.hideDrawer(),this.textMsg){var t=this.replaceEmoji(this.textMsg),i={text:t};this.sendMsg(i,"text"),this.textMsg=""}},replaceEmoji:function(t){var i=this,e=t.replace(/\[([^(\]|\[)]*)\]/g,(function(t,e){console.log("item: "+t);for(var o=0;o<i.emojiList.length;o++)for(var n=i.emojiList[o],s=0;s<n.length;s++){var g=n[s];if(g.alt==t){var a="http://51daiyan.test.upcdn.net/static_s/51daiyan/img/emoji/",r='<img class="emoji_i" src="'+a+g.url+'">';return console.log("imgstr: "+r),r}}}));return e},sendMsg:function(t,i){var e,n=this;console.log("????"),console.log(i),e="custom"==i?this.tim.createCustomMessage({to:this.toUserId,conversationType:o.$TIM.TYPES.CONV_GROUP,payload:{data:t.data,description:t.description,extension:t.extension}}):"img"==i?this.tim.createImageMessage({to:this.toUserId,conversationType:o.$TIM.TYPES.CONV_GROUP,payload:{file:t}}):this.tim.createTextMessage({to:this.toUserId,conversationType:o.$TIM.TYPES.CONV_GROUP,payload:{text:t.text}}),console.log("????1"),this.$store.commit("pushCurrentMessageList",e);var s=this.tim.sendMessage(e);s.then((function(t){n.$nextTick((function(){n.scrollToView=t.data.message.ID,n.scrollToBottom()}))}),(function(t){var i={groupID:o.$store.state.toUserId,type:o.$TIM.TYPES.GRP_AVCHATROOM},e=o.tim.joinGroup(i);e.then((function(t){switch(t.data.status){case TIM.TYPES.JOIN_STATUS_WAIT_APPROVAL:console.log("等待管理员同意");break;case TIM.TYPES.JOIN_STATUS_SUCCESS:console.log("加群成功"),console.log(t.data.group);break;case TIM.TYPES.JOIN_STATUS_ALREADY_IN_GROUP:console.log("已经在群中");break;default:break}})).catch((function(t){console.warn("joinGroup error:",t)})),console.log(t)}))},addTextMsg:function(t){this.msgList.push(t)},addVoiceMsg:function(t){this.msgList.push(t)},addImgMsg:function(t){t.msg.content=this.setPicSize(t.msg.content),this.msgImgList.push(t.msg.content.url),this.msgList.push(t)},addRedEnvelopeMsg:function(t){this.msgList.push(t)},addSystemTextMsg:function(t){this.msgList.push(t)},addSystemRedEnvelopeMsg:function(t){this.msgList.push(t)},sendSystemMsg:function(t,i){var e=this.msgList[this.msgList.length-1].msg.id;e++;var o={type:"system",msg:{id:e,type:i,content:t}};this.screenMsg(o)},toDetails:function(i){t.navigateTo({url:"HM-details/HM-details?rid="+i})},showPic:function(i){t.previewImage({indicator:"none",current:i.content.url,urls:this.msgImgList})},playVoice:function(t){this.playMsgid=t.id,this.AUDIO.src=t.content.url,this.$nextTick((function(){this.AUDIO.play()}))},voiceBegin:function(t){t.touches.length>1||(this.initPoint.Y=t.touches[0].clientY,this.initPoint.identifier=t.touches[0].identifier,this.RECORDER.start({format:"mp3"}))},recordBegin:function(t){var i=this;this.recording=!0,this.voiceTis="松开 结束",this.recordLength=0,this.recordTimer=setInterval((function(){i.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(i){if(this.recording){var e=i.touches[0];this.initPoint.Y-e.clientY>=t.upx2px(100)?(this.willStop=!0,this.recordTis="松开手指 取消发送"):(this.willStop=!1,this.recordTis="手指上滑 取消发送")}},voiceEnd:function(t){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.RECORDER.stop())},recordEnd:function(t){if(clearInterval(this.recordTimer),this.willStop)console.log("取消发送录音");else{console.log("e: "+JSON.stringify(t));var i={length:0,url:t.tempFilePath},e=parseInt(this.recordLength/60),o=this.recordLength%60;e=e<10?"0"+e:e,o=o<10?"0"+o:o,i.length=e+":"+o,this.sendMsg(i,"voice")}this.willStop=!1},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){},customModal:function(){var i=this;t.showModal({title:"提示",content:"是否发送此商品",success:function(t){if(t.confirm){console.log("用户点击确定");var e={a:i.goods_pri,a1:"a1",a2:i.goods_id,a3:n.default.imgurl+i.goods_img};e=JSON.stringify(e);var o={data:"custom_good",description:i.goods_name,extension:e};i.sendMsg(o,"custom")}else t.cancel&&console.log("用户点击取消")}})},handleClose:function(){this.rateModal=!1,this.isFocus=!1,this.isMoreOpen=!1,this.isEmojiOpen=!1},previmg:function(i){console.log(i);var e=[];e.push(i.currentTarget.dataset.url),t.previewImage({urls:e,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮,第"+(t.index+1)+"张图片")},fail:function(t){console.log(t.errMsg)}}})}}};i.default=f}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},43:
/*!*************************************************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=style&index=0&lang=scss& ***!
  \*************************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";e.r(i);var o=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=style&index=0&lang=scss& */44),n=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=n.a},44:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=style&index=0&lang=scss& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,i,e){},45:
/*!******************************************************************************************************************************************************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/utils/filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C68_yibeitong%5Cpages%5Cxiaoxi_list%5Croom.vue&module=filter&lang=wxs ***!
  \******************************************************************************************************************************************************************************************************/
/*! exports provided: default */function(t,i,e){"use strict";e.r(i);var o=e(/*! -!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader!./filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C68_yibeitong%5Cpages%5Cxiaoxi_list%5Croom.vue&module=filter&lang=wxs */46);i["default"]=o["default"]},46:
/*!*************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader!E:/phpStudy/WWW/68_yibeitong/utils/filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C68_yibeitong%5Cpages%5Cxiaoxi_list%5Croom.vue&module=filter&lang=wxs ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */function(t,i,e){"use strict";e.r(i),i["default"]=function(t){t.options.wxsCallMethods||(t.options.wxsCallMethods=[])}}},[[36,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/xiaoxi_list/room.js.map