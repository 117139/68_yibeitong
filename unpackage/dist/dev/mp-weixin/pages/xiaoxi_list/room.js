(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/xiaoxi_list/room"],{36:
/*!**********************************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/main.js?{"page":"pages%2Fxiaoxi_list%2Froom"} ***!
  \**********************************************************************************/
/*! no static exports found */function(i,t,e){"use strict";(function(i){e(/*! uni-pages */4);o(e(/*! vue */2));var t=o(e(/*! ./pages/xiaoxi_list/room.vue */37));function o(i){return i&&i.__esModule?i:{default:i}}i(t.default)}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},37:
/*!***************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue ***!
  \***************************************************************/
/*! no static exports found */function(i,t,e){"use strict";e.r(t);var o=e(/*! ./room.vue?vue&type=template&id=d8e9f394&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NzEwMiwiYXR0cnMiOnsibW9kdWxlIjoiZmlsdGVyIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3V0aWxzL2ZpbHRlci53eHMifSwiZW5kIjo3MTAyfX0%3D& */38),n=e(/*! ./room.vue?vue&type=script&lang=js& */40);for(var s in n)"default"!==s&&function(i){e.d(t,i,(function(){return n[i]}))}(s);e(/*! ./room.vue?vue&type=style&index=0&lang=scss& */43);var g,r=e(/*! ../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */14),a=e(/*! ../../utils/filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C68_yibeitong%5Cpages%5Cxiaoxi_list%5Croom.vue&module=filter&lang=wxs */45),c=Object(r["default"])(n["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],g);"function"===typeof a["default"]&&Object(a["default"])(c),c.options.__file="pages/xiaoxi_list/room.vue",t["default"]=c.exports},38:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=template&id=d8e9f394&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NzEwMiwiYXR0cnMiOnsibW9kdWxlIjoiZmlsdGVyIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3V0aWxzL2ZpbHRlci53eHMifSwiZW5kIjo3MTAyfX0%3D& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(i,t,e){"use strict";e.r(t);var o=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=template&id=d8e9f394&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NzEwMiwiYXR0cnMiOnsibW9kdWxlIjoiZmlsdGVyIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3V0aWxzL2ZpbHRlci53eHMifSwiZW5kIjo3MTAyfX0%3D& */39);e.d(t,"render",(function(){return o["render"]})),e.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),e.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),e.d(t,"components",(function(){return o["components"]}))},39:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=template&id=d8e9f394&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NzEwMiwiYXR0cnMiOnsibW9kdWxlIjoiZmlsdGVyIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3V0aWxzL2ZpbHRlci53eHMifSwiZW5kIjo3MTAyfX0%3D& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(i,t,e){"use strict";var o;e.r(t),e.d(t,"render",(function(){return n})),e.d(t,"staticRenderFns",(function(){return g})),e.d(t,"recyclableRender",(function(){return s})),e.d(t,"components",(function(){return o}));var n=function(){var i=this,t=i.$createElement,e=(i._self._c,i.__map(i.msgList,(function(t,e){var o=i.__get_orig(t),n="@TIM#SYSTEM"!=t.from&&0==e?i.timeFliter(t.time):null,s="@TIM#SYSTEM"!=t.from&&0!=e&&e>0?i.gettime1(e-1):null,g="@TIM#SYSTEM"!=t.from&&"out"!=t.flow&&"@TIM#SYSTEM"==t.conversationID?i.getimg("/static/images/ybt_group.png"):null,r="@TIM#SYSTEM"==t.from||"out"==t.flow||"@TIM#SYSTEM"==t.conversationID||t.avatar?null:i.getimg("/static/images/tx_m2.jpg"),a="@TIM#SYSTEM"!=t.from&&t.type==i.TIM.TYPES.MSG_TEXT?i.nodesFliter(t.payload.text):null,c="@TIM#SYSTEM"!=t.from&&t.type==i.TIM.TYPES.MSG_CUSTOM&&"custom_good"==t.payload.data?i.getarg(t.payload.extension,"a2",t.payload.data):null,f="@TIM#SYSTEM"!=t.from&&t.type==i.TIM.TYPES.MSG_CUSTOM&&"custom_good"==t.payload.data?i.getarg(t.payload.extension,"a3",t.payload.data):null,l="@TIM#SYSTEM"!=t.from&&t.type==i.TIM.TYPES.MSG_CUSTOM&&"custom_good"==t.payload.data?i.getarg(t.payload.extension,"a",t.payload.data):null;return{$orig:o,m0:n,m1:s,m2:g,m3:r,m4:a,m5:c,m6:f,m7:l}})));i._isMounted||(i.e0=function(t){i.isFocus=!0},i.e1=function(t){i.isFocus=!1}),i.$mp.data=Object.assign({},{$root:{l0:e}})},s=!1,g=[];n._withStripped=!0},40:
/*!****************************************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************/
/*! no static exports found */function(i,t,e){"use strict";e.r(t);var o=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=script&lang=js& */41),n=e.n(o);for(var s in o)"default"!==s&&function(i){e.d(t,i,(function(){return o[i]}))}(s);t["default"]=n.a},41:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(i,t,e){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=g(e(/*! ../../service.js */8)),s=e(/*! vuex */10);g(e(/*! ../../common/tim/user.js */42));function g(i){return i&&i.__esModule?i:{default:i}}function r(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.push.apply(e,o)}return e}function a(i){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?r(Object(e),!0).forEach((function(t){c(i,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))}))}return i}function c(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var f={data:function(){return{msg_type:1,goods_id:"",goods_name:"",goods_img:"",goods_pri:"",conversationActive:null,toUserId:"",toUserInfo:null,userInfo:null,nextReqMessageID:"",count:15,isCompleted:"",msgList:[],TIM:null,textMsg:"",isHistoryLoading:!1,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgImgList:[],myuid:0,RECORDER:i.getRecorderManager(),isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,AUDIO:i.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,emojiList:this.$common.emojiList,onlineEmoji:{"100.gif":"AbNQgA.gif","101.gif":"AbN3ut.gif","102.gif":"AbNM3d.gif","103.gif":"AbN8DP.gif","104.gif":"AbNljI.gif","105.gif":"AbNtUS.gif","106.gif":"AbNGHf.gif","107.gif":"AbNYE8.gif","108.gif":"AbNaCQ.gif","109.gif":"AbNN4g.gif","110.gif":"AbN0vn.gif","111.gif":"AbNd3j.gif","112.gif":"AbNsbV.gif","113.gif":"AbNwgs.gif","114.gif":"AbNrD0.gif","115.gif":"AbNDuq.gif","116.gif":"AbNg5F.gif","117.gif":"AbN6ET.gif","118.gif":"AbNcUU.gif","119.gif":"AbNRC4.gif","120.gif":"AbNhvR.gif","121.gif":"AbNf29.gif","122.gif":"AbNW8J.gif","123.gif":"AbNob6.gif","124.gif":"AbN5K1.gif","125.gif":"AbNHUO.gif","126.gif":"AbNIDx.gif","127.gif":"AbN7VK.gif","128.gif":"AbNb5D.gif","129.gif":"AbNX2d.gif","130.gif":"AbNLPe.gif","131.gif":"AbNjxA.gif","132.gif":"AbNO8H.gif","133.gif":"AbNxKI.gif","134.gif":"AbNzrt.gif","135.gif":"AbU9Vf.gif","136.gif":"AbUSqP.gif","137.gif":"AbUCa8.gif","138.gif":"AbUkGQ.gif","139.gif":"AbUFPg.gif","140.gif":"AbUPIS.gif","141.gif":"AbUZMn.gif","142.gif":"AbUExs.gif","143.gif":"AbUA2j.gif","144.gif":"AbUMIU.gif","145.gif":"AbUerq.gif","146.gif":"AbUKaT.gif","147.gif":"AbUmq0.gif","148.gif":"AbUuZV.gif","149.gif":"AbUliF.gif","150.gif":"AbU1G4.gif","151.gif":"AbU8z9.gif","152.gif":"AbU3RJ.gif","153.gif":"AbUYs1.gif","154.gif":"AbUJMR.gif","155.gif":"AbUadK.gif","156.gif":"AbUtqx.gif","157.gif":"AbUUZ6.gif","158.gif":"AbUBJe.gif","159.gif":"AbUdIO.gif","160.gif":"AbU0iD.gif","161.gif":"AbUrzd.gif","162.gif":"AbUDRH.gif","163.gif":"AbUyQA.gif","164.gif":"AbUWo8.gif","165.gif":"AbU6sI.gif","166.gif":"AbU2eP.gif","167.gif":"AbUcLt.gif","168.gif":"AbU4Jg.gif","169.gif":"AbURdf.gif","170.gif":"AbUhFS.gif","171.gif":"AbU5WQ.gif","172.gif":"AbULwV.gif","173.gif":"AbUIzj.gif","174.gif":"AbUTQs.gif","175.gif":"AbU7yn.gif","176.gif":"AbUqe0.gif","177.gif":"AbUHLq.gif","178.gif":"AbUOoT.gif","179.gif":"AbUvYF.gif","180.gif":"AbUjFU.gif","181.gif":"AbaSSJ.gif","182.gif":"AbUxW4.gif","183.gif":"AbaCO1.gif","184.gif":"Abapl9.gif","185.gif":"Aba9yR.gif","186.gif":"AbaFw6.gif","187.gif":"Abaiex.gif","188.gif":"AbakTK.gif","189.gif":"AbaZfe.png","190.gif":"AbaEFO.gif","191.gif":"AbaVYD.gif","192.gif":"AbamSH.gif","193.gif":"AbaKOI.gif","194.gif":"Abanld.gif","195.gif":"Abau6A.gif","196.gif":"AbaQmt.gif","197.gif":"Abal0P.gif","198.gif":"AbatpQ.gif","199.gif":"Aba1Tf.gif","200.png":"Aba8k8.png","201.png":"AbaGtS.png","202.png":"AbaJfg.png","203.png":"AbaNlj.png","204.png":"Abawmq.png","205.png":"AbaU6s.png","206.png":"AbaaXn.png","207.png":"Aba000.png","208.png":"AbarkT.png","209.png":"AbastU.png","210.png":"AbaB7V.png","211.png":"Abafn1.png","212.png":"Abacp4.png","213.png":"AbayhF.png","214.png":"Abag1J.png","215.png":"Aba2c9.png","216.png":"AbaRXR.png","217.png":"Aba476.png","218.png":"Abah0x.png","219.png":"Abdg58.png"},windowsState:"",redenvelopeData:{rid:null,from:null,face:null,blessing:null,money:null},customModalVisible:!1,customData:"",customDescription:"",customExtension:"",focusedInput:"",isShow:!1,isFocus:!1}},computed:a({},(0,s.mapState)({loginDatas:"loginDatas",hasLogin:"hasLogin",currentMessageList:function(i){return i.currentMessageList}})),watch:{currentMessageList:function(i,t){this.msgList=i,this.screenMsg(i,t)}},onShareAppMessage:function(){return{title:"依辈通",path:"/pages/index/index?pid="+o.$store.state.loginDatas.id,success:function(i){console.log("成功",i)}}},onLoad:function(t){var e=this;o=this,console.log("对方聊天id"+t.id),console.log("对方聊天type"+t.type),this.hasLogin?(console.log(t.goods_name),console.log(t.goods_img),console.log(t.goods_pri),this.goods_name=t.goods_name,this.goods_img=t.goods_img,this.goods_pri=t.goods_pri,this.goods_id=t.goods_id,t.type&&(this.msg_type=t.type),this.toUserId=t.id?t.id:this.$store.state.toUserId,this.conversationActive=this.$store.state.conversationActive,console.log("conversationActive===============>"),console.log(this.conversationActive),i.setNavigationBarTitle({title:this.conversationActive.groupProfile.name}),this.TIM=this.$TIM,this.getMsgList(),this.AUDIO.onEnded((function(i){e.playMsgid=null})),this.RECORDER.onStart((function(i){e.recordBegin(i)})),this.RECORDER.onStop((function(i){e.recordEnd(i)}))):i.navigateBack({delta:1})},onShow:function(){var i=this;i.isShow=!0,setTimeout((function(){i.scrollToBottom(),i.scrollTop=99999999999999,i.isHistoryLoading=!1}),500)},onUnload:function(){var i=this.tim.setMessageRead({conversationID:this.conversationActive.conversationID});i.then((function(i){console.log("全部已读")})).catch((function(i){console.warn("setMessageRead error:",i)}))},onPullDownRefresh:function(){i.stopPullDownRefresh()},methods:{getimg:function(i){return n.default.getimg(i)},getmsg:function(){var t=this,e={token:t.loginDatas.userToken,type:t.msg_type,id:t.toUserId};n.default.P_get("/getTx",e).then((function(e){console.log(e),1==e.code&&(t.toUserInfo=e.data,i.setNavigationBarTitle({title:e.data.name}))})).catch((function(t){console.log(t),i.showToast({icon:"none",title:"获取对方数据失败"})}))},gettime1:function(i){if(!(i<0)){console.log(i,i+1);var t=this.msgList[i].time,e=this.msgList[i+1].time;return console.log(this.getchattime(t),this.getchattime(e)),this.getchattime(t)!=this.getchattime(e)?this.getchattime(e):void 0}},jump:function(i){var t=this;1!=t.btn_kg&&(t.btn_kg=1,setTimeout((function(){t.btn_kg=0}),1e3),n.default.jump(i))},scrollToBottom:function(){this.isShow&&wx.pageScrollTo({scrollTop:9999999})},getarg:function(i,t,e){if("custom"!=e&&i){var o=/\\$/gi;i=i.replace(o,"");var n=JSON.parse(i);return n.hasOwnProperty(t)?n[t]:void 0}},nodesFliter:function(i){var t='<div class="ltbox_div" style="word-wrap:break-word;line-height:40upx;">'+i+"</div>";return t},timeFliter:function(i){var t=new Date(1e3*i),e=this.$common.dateTimeFliter(t);return e},getchattime:function(i){if(i){var t=(new Date).getFullYear(),e=(new Date).getMonth()+1,o=(new Date).getDate();i=Number(1e3*i);var n=new Date(i),s=n.getFullYear(),g=n.getMonth()+1,r=n.getDate(),a=n.getHours(),c=n.getMinutes();return c<10&&(c="0"+c),s==t?g==e&&r==o?a+":"+c:g+"-"+r+" "+a+":"+c:s+"-"+g+"-"+r+" "+a+":"+c}},screenMsg:function(i,t){var e=this;if(i[0]&&t[0])if(i[0].ID!=t[0].ID&&i.length>=this.count){var o=i.length-t.length-1;this.$nextTick((function(){e.scrollToView=i[o].ID}))}else this.$nextTick((function(){e.scrollToView=i[i.length-1].ID}));else console.log("*****"),this.$nextTick((function(){e.scrollToView=i[i.length-1].ID,e.scrollTop=9999999}))},loadHistory:function(i){var t=this;this.isHistoryLoading=!0;var e=this.conversationActive.conversationID,o=this.tim.getMessageList({conversationID:e,nextReqMessageID:this.nextReqMessageID,count:this.count});o.then((function(i){t.$store.commit("unshiftCurrentMessageList",i.data.messageList),t.nextReqMessageID=i.data.nextReqMessageID,t.isCompleted=i.data.isCompleted,t.isHistoryLoading=!1}))},getMsgList:function(){var i=this,t=this.conversationActive.conversationID,e=this.tim.getMessageList({conversationID:t,count:this.count});console.log(t),console.log(this.count),console.log(e),e.then((function(t){console.log(t.data),t.data.nextReqMessageID&&(i.$store.commit("pushCurrentMessageList",t.data.messageList),i.nextReqMessageID=t.data.nextReqMessageID,i.isCompleted=t.data.isCompleted,i.scrollToView=t.data.messageList[t.data.messageList.length-1].ID,setTimeout((function(){this.scrollTop=9999,setTimeout((function(){this.scrollAnimation=!0}),10)}),10))}))},setPicSize:function(t){var e=i.upx2px(350),o=i.upx2px(350);if(t.w>e||t.h>o){var n=t.w/t.h;t.w=n>1?e:o*n,t.h=n>1?e/n:o}return t},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var i=this;this.popupLayerClass="",setTimeout((function(){i.hideMore=!0,i.hideEmoji=!0}),150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},handRedEnvelopes:function(){i.navigateTo({url:"HM-hand/HM-hand"}),this.hideDrawer()},getImage:function(t){var e=this;e.hideDrawer(),i.chooseImage({sourceType:[t],sizeType:["original","compressed"],count:1,success:function(i){e.sendMsg(i,"img")}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer()},addEmoji:function(i){this.textMsg+=i.alt},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},sendText:function(){if(this.hideDrawer(),this.textMsg){var i=this.replaceEmoji(this.textMsg),t={text:i};this.sendMsg(t,"text"),this.textMsg=""}},replaceEmoji:function(i){var t=this,e=i.replace(/\[([^(\]|\[)]*)\]/g,(function(i,e){console.log("item: "+i);for(var o=0;o<t.emojiList.length;o++)for(var s=t.emojiList[o],g=0;g<s.length;g++){var r=s[g];if(r.alt==i){var a=n.default.imgurl+"/static/images/img/emoji/",c='<img class="emoji_i" src="'+a+r.url+'">';return console.log("imgstr: "+c),c}}}));return e},sendMsg:function(i,t){var e,n=this;console.log("????"),console.log(t),"custom"==t?e=this.tim.createCustomMessage({to:this.toUserId,conversationType:o.$TIM.TYPES.CONV_GROUP,payload:{data:i.data,description:i.description,extension:i.extension}}):"img"==t?e=this.tim.createImageMessage({to:this.toUserId,conversationType:o.$TIM.TYPES.CONV_GROUP,payload:{file:i}}):"img_cu"==t?(console.log(i),e=this.tim.createCustomMessage({to:this.toUserId,conversationType:o.$TIM.TYPES.CONV_GROUP,payload:{data:"custom_img",description:i,extension:i}})):e=this.tim.createTextMessage({to:this.toUserId,conversationType:o.$TIM.TYPES.CONV_GROUP,payload:{text:i.text}}),console.log("????1"),this.$store.commit("pushCurrentMessageList",e);var s=this.tim.sendMessage(e);s.then((function(i){n.$nextTick((function(){n.scrollToView=i.data.message.ID,n.scrollToBottom()}))}),(function(i){console.log(i)}))},addTextMsg:function(i){this.msgList.push(i)},addVoiceMsg:function(i){this.msgList.push(i)},addImgMsg:function(i){i.msg.content=this.setPicSize(i.msg.content),this.msgImgList.push(i.msg.content.url),this.msgList.push(i)},addRedEnvelopeMsg:function(i){this.msgList.push(i)},addSystemTextMsg:function(i){this.msgList.push(i)},addSystemRedEnvelopeMsg:function(i){this.msgList.push(i)},sendSystemMsg:function(i,t){var e=this.msgList[this.msgList.length-1].msg.id;e++;var o={type:"system",msg:{id:e,type:t,content:i}};this.screenMsg(o)},toDetails:function(t){i.navigateTo({url:"HM-details/HM-details?rid="+t})},showPic:function(t){i.previewImage({indicator:"none",current:t.content.url,urls:this.msgImgList})},playVoice:function(i){this.playMsgid=i.id,this.AUDIO.src=i.content.url,this.$nextTick((function(){this.AUDIO.play()}))},voiceBegin:function(i){i.touches.length>1||(this.initPoint.Y=i.touches[0].clientY,this.initPoint.identifier=i.touches[0].identifier,this.RECORDER.start({format:"mp3"}))},recordBegin:function(i){var t=this;this.recording=!0,this.voiceTis="松开 结束",this.recordLength=0,this.recordTimer=setInterval((function(){t.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(t){if(this.recording){var e=t.touches[0];this.initPoint.Y-e.clientY>=i.upx2px(100)?(this.willStop=!0,this.recordTis="松开手指 取消发送"):(this.willStop=!1,this.recordTis="手指上滑 取消发送")}},voiceEnd:function(i){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.RECORDER.stop())},recordEnd:function(i){if(clearInterval(this.recordTimer),this.willStop)console.log("取消发送录音");else{console.log("e: "+JSON.stringify(i));var t={length:0,url:i.tempFilePath},e=parseInt(this.recordLength/60),o=this.recordLength%60;e=e<10?"0"+e:e,o=o<10?"0"+o:o,t.length=e+":"+o,this.sendMsg(t,"voice")}this.willStop=!1},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){},customModal:function(){var t=this;i.showModal({title:"提示",content:"是否发送此商品",success:function(i){if(i.confirm){console.log("用户点击确定");var e={a:t.goods_pri,a1:"a1",a2:t.goods_id,a3:n.default.imgurl+t.goods_img};e=JSON.stringify(e);var o={data:"custom_good",description:t.goods_name,extension:e};t.sendMsg(o,"custom")}else i.cancel&&console.log("用户点击取消")}})},handleClose:function(){this.rateModal=!1,this.isFocus=!1,this.isMoreOpen=!1,this.isEmojiOpen=!1},previmg:function(t){console.log(t);var e=[];e.push(t.currentTarget.dataset.url),i.previewImage({urls:e,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(i){console.log("选中了第"+(i.tapIndex+1)+"个按钮,第"+(i.index+1)+"张图片")},fail:function(i){console.log(i.errMsg)}}})}}};t.default=f}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},43:
/*!*************************************************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=style&index=0&lang=scss& ***!
  \*************************************************************************************************/
/*! no static exports found */function(i,t,e){"use strict";e.r(t);var o=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=style&index=0&lang=scss& */44),n=e.n(o);for(var s in o)"default"!==s&&function(i){e.d(t,i,(function(){return o[i]}))}(s);t["default"]=n.a},44:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/phpStudy/WWW/68_yibeitong/pages/xiaoxi_list/room.vue?vue&type=style&index=0&lang=scss& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(i,t,e){},45:
/*!******************************************************************************************************************************************************************************************************!*\
  !*** E:/phpStudy/WWW/68_yibeitong/utils/filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C68_yibeitong%5Cpages%5Cxiaoxi_list%5Croom.vue&module=filter&lang=wxs ***!
  \******************************************************************************************************************************************************************************************************/
/*! exports provided: default */function(i,t,e){"use strict";e.r(t);var o=e(/*! -!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader!./filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C68_yibeitong%5Cpages%5Cxiaoxi_list%5Croom.vue&module=filter&lang=wxs */46);t["default"]=o["default"]},46:
/*!*************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader!E:/phpStudy/WWW/68_yibeitong/utils/filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C68_yibeitong%5Cpages%5Cxiaoxi_list%5Croom.vue&module=filter&lang=wxs ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */function(i,t,e){"use strict";e.r(t),t["default"]=function(i){i.options.wxsCallMethods||(i.options.wxsCallMethods=[])}}},[[36,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/xiaoxi_list/room.js.map