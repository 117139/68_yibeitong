{"version":3,"sources":["uni-app:///main.js","webpack:///E:/phpStudy/WWW/68_yibeitong/pagesA/tg_img/tg_img.vue?05d6","webpack:///E:/phpStudy/WWW/68_yibeitong/pagesA/tg_img/tg_img.vue?438f","webpack:///E:/phpStudy/WWW/68_yibeitong/pagesA/tg_img/tg_img.vue?79e2","webpack:///E:/phpStudy/WWW/68_yibeitong/pagesA/tg_img/tg_img.vue?a30c","uni-app:///pagesA/tg_img/tg_img.vue","webpack:///E:/phpStudy/WWW/68_yibeitong/pagesA/tg_img/tg_img.vue?081f","webpack:///E:/phpStudy/WWW/68_yibeitong/pagesA/tg_img/tg_img.vue?319a"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iG;AACAA,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACa;;;AAGlE;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAknB,CAAgB,gnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4BtoB;AACA;;;;;AAKA;AACA,kG;;;AAGA,S;AACA;AACA,MADA,kBACA;AACA;AACA,gBADA;AAEA,kBAFA;;AAIA,qBAJA;AAKA,kBALA;;;;AASA;AACA,kBADA;AAEA,oBAFA,EATA;;AAaA,mBAbA;AAcA,wCAdA;AAeA,cAfA;;AAiBA,GAnBA;AAoBA,wBApBA;AAqBA,SArBA,qBAqBA;AACA;AACA;AACA,GAxBA;AAyBA;AACA,aADA,uBACA;AACA;AACA;AACA,+BADA;AAEA,iCAFA;AAGA,0BAHA;AAIA,6BAJA;AAKA,gBALA,oBAKA,OALA,EAKA,EALA;AAMA,cANA,kBAMA,GANA,EAMA;AACA;AACA;AACA,yBADA;;AAGA,SAXA;AAYA,aAZA,iBAYA,GAZA,EAYA,EAZA;;;AAeA;AACA;AACA,sBADA;AAEA,cAFA;AAGA,eAHA;AAIA;AACA,mCADA;AAEA,0CAFA;AAGA,wBAHA,EAJA;;;AAUA;AACA,sBADA;AAEA,0CAFA;AAGA,6BAHA;AAIA,cAJA;AAKA,eALA,EAVA,CADA;;;;AAoBA;AACA,KAvCA;AAwCA,mBAxCA,6BAwCA;AACA;AACA,yBADA;;AAGA;AACA,KA7CA;AA8CA,WA9CA,qBA8CA;AACA,qBADA,GACA,MADA;;AAGA;AACA,wDAJA;AAKA;AACA,gCADA,EACA;AACA,oCAFA;AAGA,yCAHA;AAIA;AACA;AADA,qBAJA;;AAQA,kDARA,EAQA;AACA,sCATA,EASA;AACA;AACA,gCADA;AAEA,+BAFA,EAVA;;AAcA,+BAdA;;AAgBA,yBADA,KACA,QADA,KACA;AACA;AACA,qBAlBA;AAmBA,6BAnBA;;;;;;AAyBA,yBALA,KAKA,SALA,KAKA,CAJA,IAIA,SAJA,IAIA,CAHA,OAGA,SAHA,OAGA,CAFA,QAEA,SAFA,QAEA,CADA,QACA,SADA,QACA;AACA;AACA;AACA,qCADA;AAEA,0CAFA;AAGA,ySAHA;AAIA,6BAJA;AAKA,6BALA;AAMA,oCANA;AAOA,oCAPA,wBAOA,SAPA,EAOA;AACA;AACA;AACA;AACA;AACA;AACA,2BAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCADA;AAEA,sDAFA;;AAIA;AACA,yCADA;AAEA,2CAFA;;AAIA,yBAnCA,EADA;;AAsCA;AACA,oCADA;AAEA,yCAFA;AAGA,mCAHA;AAIA,qCAJA;AAKA,oCALA;AAMA,uCANA;;AAQA,6BADA,SACA,SADA,SACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCADA;AAEA;AACA,2CADA;AAEA,wCAFA,EAFA;;AAMA,mCANA;AAOA,oCAPA;;AASA,yBAxBA,EAtCA;;AAgEA;AACA,oCADA;AAEA,wCAFA;AAGA,wCAHA;AAIA,oCAJA;AAKA,uCALA;;AAOA,6BADA,SACA,SADA,SACA;AACA;AACA;AACA;AACA,oCADA;AAEA,4CAFA;AAGA;AACA,2CADA;AAEA,wCAFA,EAHA;;AAOA,mCAPA;AAQA,oCARA;;AAUA,yBApBA,EAhEA;;AAsFA;AACA,oCADA;AAEA,sDAFA;AAGA,oCAHA;AAIA,uCAJA;;AAMA,6BADA,SACA,SADA,SACA;AACA;AACA;AACA;AACA,oCADA;AAEA,4CAFA;AAGA;AACA,2CADA;AAEA,wCAFA,EAHA;;AAOA,+CAPA;AAQA;AACA,mCATA;AAUA;AACA;AACA,oCAZA;;AAcA,yBAvBA,EAtFA;;AA+GA;AACA,sCADA;AAEA,sCAFA;AAGA,oCAHA;AAIA,uCAJA;;AAMA,6BADA,SACA,SADA,SACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAJA;AAKA,mCALA;AAMA,mCANA;;AAQA,yBAxBA,EA/GA;;;AA0IA,qBApKA,GALA,SAKA,CALA;;AA2KA;AACA;AACA;AACA,kDA9KA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6MA;AACA;AACA,yDA/MA;;AAiNA,KA/PA;AAgQA,aAhQA,uBAgQA;AACA;;AAEA;AACA,uCADA;AAEA,eAFA,mBAEA,GAFA,EAEA;AACA;AACA,SAJA;;;;;;;;;AAaA,KAhRA;AAiRA,SAjRA,mBAiRA;;;;;;AAMA;;AAEA,KAzRA;AA0RA,UA1RA,oBA0RA;AACA;AACA;AACA,KA7RA,EAzBA,E;;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAA24B,CAAgB,q2BAAG,EAAC,C;;;;;;;;;;;ACA/5B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pagesA/tg_img/tg_img.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pagesA/tg_img/tg_img.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./tg_img.vue?vue&type=template&id=5b1c118b&\"\nvar renderjs\nimport script from \"./tg_img.vue?vue&type=script&lang=js&\"\nexport * from \"./tg_img.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tg_img.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesA/tg_img/tg_img.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tg_img.vue?vue&type=template&id=5b1c118b&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tg_img.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tg_img.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"minh100\">\r\n\t\t<!-- 说明 -->\r\n\t\t<!-- 生成海报 -->\r\n\t\t<!-- <button type=\"primary\" @tap=\"shareFc()\">生成海报</button> -->\r\n\t\t<!-- 图片展示由自己实现 -->\r\n\t\t<!-- <view class=\"flex_row_c_c modalView\" :class=\"qrShow?'show':''\" @tap=\"hideQr()\">\r\n\t\t\t<view class=\"flex_column\">\r\n\t\t\t\t<view class=\"backgroundColor-white padding1vh border_radius_10px\">\r\n\t\t\t\t\t<image :src=\"poster.finalPath || ''\" mode=\"widthFix\" class=\"posterImage\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex_row marginTop2vh\">\r\n\t\t\t\t\t<button type=\"primary\" size=\"mini\" @tap.prevent.stop=\"saveImage()\">保存图片</button>\r\n\t\t\t\t\t<button type=\"primary\" size=\"mini\">长按图片保存到手机</button>\r\n\t\t\t\t\t<button type=\"primary\" size=\"mini\" @tap.prevent.stop=\"share()\">分享图片</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view> -->\r\n\t\t<image :src=\"poster.finalPath || ''\" mode=\"widthFix\" class=\"posterImage1\"></image>\r\n\t\t<button type=\"primary\" size=\"default\" @tap.prevent.stop=\"saveImage()\">保存图片</button>\r\n\t\t<!-- 画布 -->\r\n\t\t<view class=\"hideCanvasView\">\r\n\t\t\t<canvas class=\"hideCanvas\" canvas-id=\"default_PosterCanvasId\" :style=\"{width: (poster.width||10) + 'px', height: (poster.height||10) + 'px'}\"></canvas>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport service from '../../service.js';\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations\r\n\t} from 'vuex'\r\n\t// const { wxml, style } = require('./demo.js')\r\n\timport _app from '../../utils/QS-SharePoster/app.js';\r\n\timport {\r\n\t\tgetSharePoster\r\n\t} from '../../utils/QS-SharePoster/QS-SharePoster.js';\r\n\tvar that;\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\twidth: 750,\r\n\t\t\t\theight: 1334,\r\n\r\n\t\t\t\tsheetshow: true,\r\n\t\t\t\txdxy_type: 1,\r\n\r\n\r\n\r\n\t\t\t\tposter: {\r\n\t\t\t\t\twidth: 750,\r\n\t\t\t\t\theight: 1334\r\n\t\t\t\t},\r\n\t\t\t\tqrShow: false,\r\n\t\t\t\tcanvasId: 'default_PosterCanvasId',\r\n\t\t\t\tcount: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tprops: ['postersData'],\r\n\t\tcreated() {\r\n\t\t\tthat = this;\r\n\t\t\tthis.shareFc();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tdrawImage() {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tvar drawimg = new Wxml2Canvas({\r\n\t\t\t\t\twidth: _this.data.width,\r\n\t\t\t\t\theight: _this.data.height,\r\n\t\t\t\t\telement: 'canvas1',\r\n\t\t\t\t\tbackground: '#000000',\r\n\t\t\t\t\tprogress(percent) {},\r\n\t\t\t\t\tfinish(url) {\r\n\t\t\t\t\t\twx.hideLoading();\r\n\t\t\t\t\t\twx.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: url\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror(res) {}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tlist: [{ //绘制矩形\r\n\t\t\t\t\t\t\ttype: 'rect',\r\n\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\ty: 50,\r\n\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\twidth: _this.data.width,\r\n\t\t\t\t\t\t\t\theight: _this.data.height - 60,\r\n\t\t\t\t\t\t\t\tfill: '#fff'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ //根据wxml绘制,\r\n\t\t\t\t\t\t\ttype: 'wxml',\r\n\t\t\t\t\t\t\tclass: '.hb_canvas .draw_canvas',\r\n\t\t\t\t\t\t\tlimit: '.hb_canvas',\r\n\t\t\t\t\t\t\tx: 5,\r\n\t\t\t\t\t\t\ty: 70\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t\tdrawimg.draw(data);\r\n\t\t\t},\r\n\t\t\tgetPosterHandle() {\r\n\t\t\t\twx.showLoading({\r\n\t\t\t\t\ttitle: '海报生成中...',\r\n\t\t\t\t})\r\n\t\t\t\tthis.drawImage();\r\n\t\t\t},\r\n\t\t\tasync shareFc() {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.count++;\r\n\t\t\t\t\t_app.log('准备生成:' + new Date())\r\n\t\t\t\t\tconst d = await getSharePoster({\r\n\t\t\t\t\t\t_this: _this, //若在组件中使用 必传\r\n\t\t\t\t\t\tcanvasType: '2d',\r\n\t\t\t\t\t\ttype: 'testShareType',\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t//访问接口获取背景图携带自定义数据\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposterCanvasId: _this.canvasId, //canvasId\r\n\t\t\t\t\t\tdelayTimeScale: 20, //延时系数\r\n\t\t\t\t\t\tbackground: {\r\n\t\t\t\t\t\t\theight: 10,\r\n\t\t\t\t\t\t\twidth: 10\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsetCanvasWH({\r\n\t\t\t\t\t\t\tbgObj\r\n\t\t\t\t\t\t}) {\r\n\t\t\t\t\t\t\t_this.poster = bgObj\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdrawArray({\r\n\t\t\t\t\t\t\tbgObj,\r\n\t\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\t\tbgScale,\r\n\t\t\t\t\t\t\tsetBgObj,\r\n\t\t\t\t\t\t\tgetBgObj\r\n\t\t\t\t\t\t}) {\r\n\t\t\t\t\t\t\treturn [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttype: 'image',\r\n\t\t\t\t\t\t\t\t\tid: 'productImage',\r\n\t\t\t\t\t\t\t\t\turl: 'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201802%2F09%2F20180209120154_oycpr.jpg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1613449188&t=6f2f5c5a6150b5cc5e516e7d998bf7b2',\r\n\t\t\t\t\t\t\t\t\tdx: 0,\r\n\t\t\t\t\t\t\t\t\tdy: 0,\r\n\t\t\t\t\t\t\t\t\tserialNum: 0,\r\n\t\t\t\t\t\t\t\t\tinfoCallBack(imageInfo) {\r\n\t\t\t\t\t\t\t\t\t\tlet width;\r\n\t\t\t\t\t\t\t\t\t\tlet height;\r\n\t\t\t\t\t\t\t\t\t\tif (imageInfo.width > imageInfo.height) {\r\n\t\t\t\t\t\t\t\t\t\t\twidth = imageInfo.width > 700 ? 700 : imageInfo.width;\r\n\t\t\t\t\t\t\t\t\t\t\theight = width / imageInfo.width * imageInfo.height;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\theight = imageInfo.height > 700 ? 700 : imageInfo.height;\r\n\t\t\t\t\t\t\t\t\t\t\twidth = height / imageInfo.height * imageInfo.width;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (width < 500) {\r\n\t\t\t\t\t\t\t\t\t\t\twidth = 500;\r\n\t\t\t\t\t\t\t\t\t\t\theight = width / imageInfo.width * imageInfo.height;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tlet addHeight = height * .3;\r\n\t\t\t\t\t\t\t\t\t\tif (addHeight < 150) addHeight = 150;\r\n\t\t\t\t\t\t\t\t\t\tif (addHeight > 250) addHeight = 250;\r\n\t\t\t\t\t\t\t\t\t\twidth=750\r\n\t\t\t\t\t\t\t\t\t\theight=925\r\n\t\t\t\t\t\t\t\t\t\taddHeight=404\r\n\t\t\t\t\t\t\t\t\t\tsetBgObj({\r\n\t\t\t\t\t\t\t\t\t\t\twidth,\r\n\t\t\t\t\t\t\t\t\t\t\theight: height + addHeight\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\tdWidth: width,\r\n\t\t\t\t\t\t\t\t\t\t\tdHeight: height\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\tid: 'productName',\r\n\t\t\t\t\t\t\t\t\ttext: '阿一古',\r\n\t\t\t\t\t\t\t\t\tcolor: '#000',\r\n\t\t\t\t\t\t\t\t\tserialNum: 1,\r\n\t\t\t\t\t\t\t\t\tallInfoCallback({\r\n\t\t\t\t\t\t\t\t\t\tdrawArray\r\n\t\t\t\t\t\t\t\t\t}) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('allInfoCallback', 1)\r\n\t\t\t\t\t\t\t\t\t\tconst productImage = drawArray.find(item => item.id === 'productImage')\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('allInfoCallback', 2)\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('allInfoCallback getBgObj', getBgObj)\r\n\t\t\t\t\t\t\t\t\t\tconst addHeight = getBgObj().height - productImage.dHeight;\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('allInfoCallback', 3)\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\tsize: 26,\r\n\t\t\t\t\t\t\t\t\t\t\tlineFeed: {\r\n\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth: 200,\r\n\t\t\t\t\t\t\t\t\t\t\t\tlineNum: 1\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tdx:312,\r\n\t\t\t\t\t\t\t\t\t\t\tdy:1033\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\ttext: '邀请您加入依辈通',\r\n\t\t\t\t\t\t\t\t\tcolor: '#f1505c',\r\n\t\t\t\t\t\t\t\t\tserialNum: 2,\r\n\t\t\t\t\t\t\t\t\tallInfoCallback({\r\n\t\t\t\t\t\t\t\t\t\tdrawArray\r\n\t\t\t\t\t\t\t\t\t}) {\r\n\t\t\t\t\t\t\t\t\t\tconst productImage = drawArray.find(item => item.id === 'productImage')\r\n\t\t\t\t\t\t\t\t\t\tconst addHeight = getBgObj().height - productImage.dHeight;\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\tsize: 26,\r\n\t\t\t\t\t\t\t\t\t\t\tcolor:'#999999',\r\n\t\t\t\t\t\t\t\t\t\t\tlineFeed: {\r\n\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth: 300,\r\n\t\t\t\t\t\t\t\t\t\t\t\tlineNum: 1\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tdx:312,\r\n\t\t\t\t\t\t\t\t\t\t\tdy:1101\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\ttext: '———— 长按识别或扫描二维码进入 ————',\r\n\t\t\t\t\t\t\t\t\tserialNum: 3,\r\n\t\t\t\t\t\t\t\t\tallInfoCallback({\r\n\t\t\t\t\t\t\t\t\t\tdrawArray\r\n\t\t\t\t\t\t\t\t\t}) {\r\n\t\t\t\t\t\t\t\t\t\tconst productImage = drawArray.find(item => item.id === 'productImage')\r\n\t\t\t\t\t\t\t\t\t\tconst addHeight = getBgObj().height - productImage.dHeight;\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\tsize: 28,\r\n\t\t\t\t\t\t\t\t\t\t\tcolor:'#999999',\r\n\t\t\t\t\t\t\t\t\t\t\tlineFeed: {\r\n\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth: 750,\r\n\t\t\t\t\t\t\t\t\t\t\t\tlineNum: 1\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\ttextAlign:'center',\r\n\t\t\t\t\t\t\t\t\t\t\t// dx:108,\r\n\t\t\t\t\t\t\t\t\t\t\tdx:350,\r\n\t\t\t\t\t\t\t\t\t\t\t// dx:0,\r\n\t\t\t\t\t\t\t\t\t\t\t// dy:1175\r\n\t\t\t\t\t\t\t\t\t\t\tdy:1200\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttype: 'qrcode',\r\n\t\t\t\t\t\t\t\t\ttext: '123456',\r\n\t\t\t\t\t\t\t\t\tserialNum: 4,\r\n\t\t\t\t\t\t\t\t\tallInfoCallback({\r\n\t\t\t\t\t\t\t\t\t\tdrawArray\r\n\t\t\t\t\t\t\t\t\t}) {\r\n\t\t\t\t\t\t\t\t\t\tconst productImage = drawArray.find(item => item.id === 'productImage')\r\n\t\t\t\t\t\t\t\t\t\tconst addHeight = getBgObj().height - productImage.dHeight;\r\n\t\t\t\t\t\t\t\t\t\tconst widthSize = getBgObj().width * .4;\r\n\t\t\t\t\t\t\t\t\t\tconst heightSize = addHeight;\r\n\t\t\t\t\t\t\t\t\t\tconst countSize = widthSize > heightSize ? heightSize : widthSize;\r\n\t\t\t\t\t\t\t\t\t\t// countSize=172\r\n\t\t\t\t\t\t\t\t\t\tconst size = countSize * .9;\r\n\t\t\t\t\t\t\t\t\t\t\t_app.log(getBgObj().width)\r\n\t\t\t\t\t\t\t\t\t\t\t_app.log(getBgObj().height)\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t// size: size,\r\n\t\t\t\t\t\t\t\t\t\t\t// dx: getBgObj().width - countSize * .95,\r\n\t\t\t\t\t\t\t\t\t\t\t// dy: getBgObj().height - countSize * .95\r\n\t\t\t\t\t\t\t\t\t\t\tsize:172,\r\n\t\t\t\t\t\t\t\t\t\t\tdx:123,\r\n\t\t\t\t\t\t\t\t\t\t\tdy:979\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t_app.log('海报生成成功, 时间:' + new Date() + '， 临时路径: ' + d.poster.tempFilePath)\r\n\t\t\t\t\t_this.poster.finalPath = d.poster.tempFilePath;\r\n\t\t\t\t\t_this.qrShow = true;\r\n\t\t\t\t\t_this.src = d.poster.tempFilePath\r\n\t\t\t\t\treturn\r\n\t\t\t\t\twx.uploadFile({\r\n\t\t\t\t\t\turl: service.IPurl + '/upload/streamImg', //仅为示例，非真实的接口地址\r\n\t\t\t\t\t\tfilePath: d.poster.tempFilePath,\r\n\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t'type': 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t// console.log(res.data)\r\n\t\t\t\t\t\t\tvar ndata = JSON.parse(res.data)\r\n\t\t\t\t\t\t\tif (ndata.code == 1) {\r\n\t\t\t\t\t\t\t\t// console.log(imgs[i], i,ndata.msg)\r\n\t\t\t\t\t\t\t\t// var newdata = that.imgb\r\n\t\t\t\t\t\t\t\t// console.log(i)\r\n\t\t\t\t\t\t\t\t// newdata.push(ndata.msg)\r\n\t\t\t\t\t\t\t\t_this.src = ndata.msg\r\n\t\t\t\t\t\t\t\twx.showToast({\r\n\t\t\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"上传成功\"\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\twx.showToast({\r\n\t\t\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"上传失败\"\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t_app.hideLoading();\r\n\t\t\t\t\t_app.showToast(JSON.stringify(e));\r\n\t\t\t\t\tconsole.log(JSON.stringify(e));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsaveImage() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\tfilePath: this.poster.finalPath,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t_app.showToast('操作成功');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t_app.showToast('操作成功');\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tthat.hideQr();\r\n\t\t\t\t}, 1000)\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tshare() {\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t_app.getShare(false, false, 2, '', '', '', this.poster.finalPath, false, false);\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\t_app.showToast('分享了');\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\thideQr() {\r\n\t\t\t\t// this.qrShow = false;\r\n\t\t\t\tthat.$emit('hideQr');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.hideCanvasView {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.hideCanvas {\r\n\t\tposition: fixed;\r\n\t\ttop: -99999upx;\r\n\t\tleft: -99999upx;\r\n\t\tz-index: -99999;\r\n\t}\r\n\r\n\t.flex_row_c_c {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.modalView {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\topacity: 0;\r\n\t\toutline: 0;\r\n\t\ttransform: scale(1.2);\r\n\t\tperspective: 2500upx;\r\n\t\tbackground: rgba(0, 0, 0, 0.6);\r\n\t\ttransition: all .3s ease-in-out;\r\n\t\tpointer-events: none;\r\n\t\tbackface-visibility: hidden;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.modalView.show {\r\n\t\topacity: 1;\r\n\t\ttransform: scale(1);\r\n\t\tpointer-events: auto;\r\n\t}\r\n\r\n\t.flex_column {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.backgroundColor-white {\r\n\t\tbackground-color: white;\r\n\t}\r\n\r\n\t.border_radius_10px {\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\r\n\t.padding1vh {\r\n\t\tpadding: 1vh;\r\n\t}\r\n\r\n\t.posterImage {\r\n\t\twidth: 60vw;\r\n\t}\r\n\r\n\t.flex_row {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t}\r\n\r\n\t.marginTop2vh {\r\n\t\tmargin-top: 2vh;\r\n\t}\r\n\t.minh100{\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tpadding: 30upx;\r\n\t\t\r\n\t\t/* justify-content: center; */\r\n\t}\r\n\t.posterImage1{\r\n\t\twidth: 600upx;\r\n\t\theight: 1067upx;\r\n\t\tmargin: 0 auto 30upx;\r\n\t\tbox-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.1);\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tg_img.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tg_img.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1611130466383\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}